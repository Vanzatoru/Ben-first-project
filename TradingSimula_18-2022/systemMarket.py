from equityDataClass import equityClass #line:1
from math import sqrt #line:2
class systemMarketClass (object ):#line:4
    def __init__ (O00OO00O00OO00O0O ):#line:5
        O00OO00O00OO00O0O .systemName =""#line:6
        O00OO00O00OO00O0O .symbol =""#line:7
        O00OO00O00OO00O0O .comName =""#line:8
        O00OO00O00OO00O0O .tradesList =list ()#line:9
        O00OO00O00OO00O0O .equity =equityClass #line:10
        O00OO00O00OO00O0O .avgWin =0 #line:11
        O00OO00O00OO00O0O .avgLoss =0 #line:12
        O00OO00O00OO00O0O .avgTrade =0 #line:13
        O00OO00O00OO00O0O .profitLoss =0 #line:14
        O00OO00O00OO00O0O .numTrades =0 #line:15
        O00OO00O00OO00O0O .avgYearlyTrades =0 #line:16
        O00OO00O00OO00O0O .maxxDD =0 #line:17
        O00OO00O00OO00O0O .clsTrdDD =0 #line:18
        O00OO00O00OO00O0O .perWins =0 #line:19
        O00OO00O00OO00O0O .initCapital =0 #line:20
        O00OO00O00OO00O0O .monthlyReturnTuple =list ()#line:21
        O00OO00O00OO00O0O .yearlyReturnTuple =list ()#line:22
        O00OO00O00OO00O0O .avgMonthlyReturn =0 #line:23
        O00OO00O00OO00O0O .avgMonthlyStdDev =0 #line:24
        O00OO00O00OO00O0O .avgYearlyReturn =0 #line:25
        O00OO00O00OO00O0O .drawDownTuple =list ()#line:26
        O00OO00O00OO00O0O .avgMaxDD =0 #line:27
    def setSysMarkInfo (O0OO0O00OO0OOO0OO ,O0O0OO0O000O00O0O ,O0OOOO000OOOOOO0O ,OO0OOO0O0OOOO0OOO ,O000OOO000O000000 ,OO0OO00O000O0OO0O ,OO0OO00O0OO00O0O0 ):#line:28
        O0OO0O00OO0OOO0OO .systemName =O0O0OO0O000O00O0O #line:29
        O0OO0O00OO0OOO0OO .symbol =O0OOOO000OOOOOO0O #line:30
        O0OO0O00OO0OOO0OO .comName =OO0OOO0O0OOOO0OOO #line:31
        O0OO0O00OO0OOO0OO .tradesList =list (O000OOO000O000000 )#line:32
        O0OO0O00OO0OOO0OO .equity =OO0OO00O000O0OO0O #line:33
        OO0OOOOOOO000OO0O =0 #line:34
        O0OO0O0O0000O00OO =0 #line:35
        O00O00000000O0O0O =0 #line:36
        O0O0OO0000O0OO00O =0 #line:37
        OO000OO000000OO0O =0 #line:38
        O0OO0O000O0O000O0 =0 #line:39
        O0OO00000OOOO00O0 =0 #line:40
        OO0O0O0O000O0OOO0 =0 #line:41
        O0O00O00O0O0OO0O0 =0 #line:42
        O0O0O0O0000OOO0OO =0 #line:43
        O0OOOOOOO000OO00O =0 #line:44
        OO0OO000O00000OOO =0 #line:45
        OO00OO00000OO0O0O =0 #line:46
        OO000000O00OO0OOO =0 #line:47
        O0O00OO0O000000OO =0 #line:48
        OOOOOO0O0OOO0OO00 =0 #line:49
        OO000000OO0000OO0 =True #line:50
        O000O00O00O0OOO00 =list ()#line:51
        O0O0000OOOOOOO00O =len (O0OO0O00OO0OOO0OO .equity .dailyEquityVal )#line:52
        for O00000000O00OO000 in range (0 ,O0O0000OOOOOOO00O ):#line:56
            OO0OO0OOO0OOO00OO =O0OO0O00OO0OOO0OO .equity .equityDate [O00000000O00OO000 ]#line:57
            if O00000000O00OO000 ==0 :OO00OO00000OO0O0O =0 #line:58
            if O00000000O00OO000 >0 :#line:59
                OO0OO0O00OO0OOO00 =O0OO0O00OO0OOO0OO .equity .equityDate [O00000000O00OO000 ]#line:60
                O0000OO0OO0OOOO0O =(int (O0OO0O00OO0OOO0OO .equity .equityDate [O00000000O00OO000 -1 ]/100 )%100 )#line:61
                OO0O00O00O000OOOO =(int (O0OO0O00OO0OOO0OO .equity .equityDate [O00000000O00OO000 ]/100 )%100 )#line:62
                if O0000OO0OO0OOOO0O !=OO0O00O00O000OOOO :#line:63
                    O0OO0O00OO0OOO0OO .monthlyReturnTuple +=((O0OO0O00OO0OOO0OO .equity .equityDate [O00000000O00OO000 -1 ],O0OO0O00OO0OOO0OO .equity .dailyEquityVal [O00000000O00OO000 -1 ]-OO00OO00000OO0O0O ),)#line:64
                    OO00OO00000OO0O0O =O0OO0O00OO0OOO0OO .equity .dailyEquityVal [O00000000O00OO000 -1 ]#line:65
                    O0OO0OO0O0O0O0O0O =False #line:66
                    O0OO0OOO00OOO0000 =int (OO0OO0O00OO0OOO00 /100 )%100 #line:67
                    if O0OO0OOO00OOO0000 ==1 or O00000000O00OO000 ==O0O0000OOOOOOO00O -1 :#line:68
                        OO00O00OOO000OO0O =O0OO0O00OO0OOO0OO .equity .equityDate [O00000000O00OO000 -1 ]#line:69
                        O00O00000OO00O000 =O0OO0O00OO0OOO0OO .equity .dailyEquityVal [O00000000O00OO000 -1 ]-OO000000O00OO0OOO #line:70
                        O0OO0O00OO0OOO0OO .yearlyReturnTuple +=((OO00O00OOO000OO0O ,O00O00000OO00O000 ),)#line:71
                        OO000000O00OO0OOO =O0OO0O00OO0OOO0OO .equity .dailyEquityVal [O00000000O00OO000 -1 ]#line:72
                if O00000000O00OO000 ==O0O0000OOOOOOO00O -1 :#line:73
                    O0OO0O00OO0OOO0OO .monthlyReturnTuple +=((O0OO0O00OO0OOO0OO .equity .equityDate [O00000000O00OO000 ],O0OO0O00OO0OOO0OO .equity .dailyEquityVal [O00000000O00OO000 ]-OO00OO00000OO0O0O ),)#line:74
            OO000OO000000OO0O =O0OO0O00OO0OOO0OO .equity .dailyEquityVal [O00000000O00OO000 ]#line:75
            O0OO0O000O0O000O0 =max (O0OO0O000O0O000O0 ,OO000OO000000OO0O )#line:77
            if OO000000OO0000OO0 :#line:78
                O0OOOOOOO000OO00O =OO000OO000000OO0O #line:79
            OO000000OO0000OO0 =False #line:80
            O0OOOOOOO000OO00O =max (O0OOOOOOO000OO00O ,OO000OO000000OO0O )#line:81
            O0O00OO0O000000OO =max (O0O00OO0O000000OO ,O0OOOOOOO000OO00O -OO000OO000000OO0O )#line:82
            if O00000000O00OO000 >0 and O0000OO0OO0OOOO0O ==12 and OO0O00O00O000OOOO ==1 :#line:83
                O0OO0O00OO0OOO0OO .drawDownTuple +=((OOOOOO0O0OOO0OO00 ,O0O00OO0O000000OO ),)#line:84
                O0O00OO0O000000OO =0 #line:86
                OO000000OO0000OO0 =True #line:87
                OOOOOO0O0OOO0OO00 +=1 #line:88
            O0OO00000OOOO00O0 =max (O0OO00000OOOO00O0 ,O0OO0O000O0O000O0 -OO000OO000000OO0O )#line:89
            O0OO0O00OO0OOO0OO .maxxDD =O0OO00000OOOO00O0 #line:90
        OOOO0OO00O0O000OO =len (O0OO0O00OO0OOO0OO .drawDownTuple )#line:91
        O0O0000OOOOO0O000 =([OOOO0000OO0O0O0OO [1 ]for OOOO0000OO0O0O0OO in O0OO0O00OO0OOO0OO .drawDownTuple ])#line:92
        O000O00O00O0OOO00 =([OO0O00000OOOOOO00 [1 ]for OO0O00000OOOOOO00 in O0OO0O00OO0OOO0OO .monthlyReturnTuple ])#line:93
        OO0O0O0OO0OOO0OO0 =([O00OOOOO0OOO00O00 [1 ]for O00OOOOO0OOO00O00 in O0OO0O00OO0OOO0OO .yearlyReturnTuple ])#line:94
        O0OOO0O0OOOOO00O0 =0 #line:95
        if len (O0O0000OOOOO0O000 )!=0 :O0OOO0O0OOOOO00O0 =sum (O0O0000OOOOO0O000 )/len (O0O0000OOOOO0O000 )#line:96
        O0OO0O00OO0OOO0OO .avgMaxDD =O0OOO0O0OOOOO00O0 #line:97
        O0OOO0O0OOOOO00O0 =0 #line:98
        if len (OO0O0O0OO0OOO0OO0 )!=0 :O0OOO0O0OOOOO00O0 =sum (OO0O0O0OO0OOO0OO0 )/len (OO0O0O0OO0OOO0OO0 )#line:99
        O0OO0O00OO0OOO0OO .avgYearlyReturn =O0OOO0O0OOOOO00O0 #line:100
        if len (O000O00O00O0OOO00 )!=0 :O0OOO0O0OOOOO00O0 =sum (O000O00O00O0OOO00 )/len (O000O00O00O0OOO00 )#line:101
        O0O0O00O0OO00OO00 =[OO0O00000OOO0OO0O -O0OOO0O0OOOOO00O0 for OO0O00000OOO0OO0O in O000O00O00O0OOO00 ]#line:102
        O000000O000O0O0O0 =[OOOO0O00OOOO0O0OO **2 for OOOO0O00OOOO0O0OO in O0O0O00O0OO00OO00 ]#line:103
        OO000O0OO0OO000OO =sum (O000000O000O0O0O0 )#line:104
        OOO0OO0O0O000OOOO =0 #line:105
        if len (O000O00O00O0OOO00 )!=0 :OOO0OO0O0O000OOOO =OO000O0OO0OO000OO /(len (O000O00O00O0OOO00 )-1 )#line:106
        O00000OOOOOO0O00O =sqrt (OOO0OO0O0O000OOOO )#line:107
        O0OO0O00OO0OOO0OO .avgMonthlyReturn =O0OOO0O0OOOOO00O0 #line:108
        O0OO0O00OO0OOO0OO .avgMonthlyStdDev =O00000OOOOOO0O00O #line:109
        for O00000000O00OO000 in range (0 ,len (O0OO0O00OO0OOO0OO .tradesList )):#line:110
            OO0O0O0O000O0OOO0 +=O0OO0O00OO0OOO0OO .tradesList [O00000000O00OO000 ].tradeProfit #line:111
            O0O00O00O0O0OO0O0 =max (O0O00O00O0O0OO0O0 ,OO0O0O0O000O0OOO0 )#line:112
            O0O0O0O0000OOO0OO =max (O0O0O0O0000OOO0OO ,O0O00O00O0O0OO0O0 -OO0O0O0O000O0OOO0 )#line:113
            O0OO0O00OO0OOO0OO .clsTrdDD =O0O0O0O0000OOO0OO #line:114
            if O0OO0O00OO0OOO0OO .tradesList [O00000000O00OO000 ].entryOrExit ==1 :#line:115
                OO0OO000O00000OOO +=1 #line:116
            for OOO00O0000OOOOO00 in range (0 ,len (O0OO0O00OO0OOO0OO .tradesList [O00000000O00OO000 ].profitPerEntry )):#line:117
                if O0OO0O00OO0OOO0OO .tradesList [O00000000O00OO000 ].profitPerEntry [OOO00O0000OOOOO00 ]>0 :#line:118
                    OO0OOOOOOO000OO0O +=O0OO0O00OO0OOO0OO .tradesList [O00000000O00OO000 ].profitPerEntry [OOO00O0000OOOOO00 ]#line:119
                    O0OO0O0O0000O00OO +=1 #line:120
                if O0OO0O00OO0OOO0OO .tradesList [O00000000O00OO000 ].profitPerEntry [OOO00O0000OOOOO00 ]<0 :#line:121
                    O00O00000000O0O0O +=O0OO0O00OO0OOO0OO .tradesList [O00000000O00OO000 ].profitPerEntry [OOO00O0000OOOOO00 ]#line:122
                    O0O0OO0000O0OO00O +=1 #line:123
        if O0OO0O0O0000O00OO !=0 :O0OO0O00OO0OOO0OO .avgWin =OO0OOOOOOO000OO0O /O0OO0O0O0000O00OO #line:132
        if O0O0OO0000O0OO00O !=0 :O0OO0O00OO0OOO0OO .avgLoss =O00O00000000O0O0O /O0O0OO0000O0OO00O #line:133
        if OO0OO000O00000OOO !=0 :O0OO0O00OO0OOO0OO .avgTrade =OO000OO000000OO0O /OO0OO000O00000OOO #line:134
        O0OO0O00OO0OOO0OO .numTrades =OO0OO000O00000OOO #line:135
        O0OO0O00OO0OOO0OO .profitLoss =OO000OO000000OO0O #line:136
        if OO0OO000O00000OOO !=0 :O0OO0O00OO0OOO0OO .perWins =O0OO0O0O0000O00OO /OO0OO000O00000OOO #line:137
        if len (OO0O0O0OO0OOO0OO0 )!=0 :O0OO0O00OO0OOO0OO .avgYearlyTrades =OO0OO000O00000OOO /(len (O000O00O00O0OOO00 )/12 )#line:138
class systemMarketStorage (object ):#line:140
    def __init__ (O0OOO000O00O0OOOO ):#line:141
        O0OOO000O00O0OOOO .value =list ()#line:142
        O0OOO000O00O0OOOO .cond =list ()#line:146
    def initSysMarkStorage (O00O000OOO0O00OOO ,OOOOOO0OOO00O0O00 ,OOO0000O00OOO0O0O ,OO00OOOO000O0OO0O ):#line:151
        O00O000OOO0O00OOO .numSysMark =OOOOOO0OOO00O0O00 #line:152
        O00O000OOO0O00OOO .numVars =OOO0000O00OOO0O0O #line:153
        O00O000OOO0O00OOO .initHistory =OO00OOOO000O0OO0O #line:154
        for OO00O0O0O0OOOO000 in range (0 ,OOOOOO0OOO00O0O00 ):#line:155
            for O0O0OOOOO00O00O0O in range (0 ,OOO0000O00OOO0O0O ):#line:156
                for OOOO00OOO000OO00O in range (0 ,OO00OOOO000O0OO0O ):#line:157
                    O00O000OOO0O00OOO .value .append ([OO00O0O0O0OOOO000 ,O0O0OOOOO00O00O0O ,0 ])#line:158
                OOO000O0O0OOOO00O =1 #line:166
    def getSysMarkVals (OO0OO0OOO00OOO00O ,OO0O00OO0O0000OOO ,OO0O0OOOOOOOOOO0O ):#line:168
        O0O000OO0O0OOO0OO =list ()#line:169
        OOO0000OO00OOOOOO =list ()#line:170
        OOOOO00000000O000 =list ()#line:171
        O0OO00OOOOOO00OO0 =list ()#line:172
        O0OO0O0000000O00O =len (OO0OO0OOO00OOO00O .value )#line:174
        for OOOOO000O000OOO0O in range (0 ,O0OO0O0000000O00O ):#line:176
            if OO0OO0OOO00OOO00O .value [OOOOO000O000OOO0O ][0 ]==OO0O00OO0O0000OOO :#line:177
                if OO0OO0OOO00OOO00O .value [OOOOO000O000OOO0O ][1 ]==0 :#line:178
                    O0O000OO0O0OOO0OO .append (OO0OO0OOO00OOO00O .value [OOOOO000O000OOO0O ][2 ])#line:179
                if OO0OO0OOO00OOO00O .value [OOOOO000O000OOO0O ][1 ]==1 :#line:180
                    OOO0000OO00OOOOOO .append (OO0OO0OOO00OOO00O .value [OOOOO000O000OOO0O ][2 ])#line:181
                if OO0OO0OOO00OOO00O .value [OOOOO000O000OOO0O ][1 ]==2 :#line:182
                    OOOOO00000000O000 .append (OO0OO0OOO00OOO00O .value [OOOOO000O000OOO0O ][2 ])#line:183
                if OO0OO0OOO00OOO00O .value [OOOOO000O000OOO0O ][1 ]==3 :#line:184
                    O0OO00OOOOOO00OO0 .append (OO0OO0OOO00OOO00O .value [OOOOO000O000OOO0O ][2 ])#line:185
        return (O0O000OO0O0OOO0OO ,OOO0000OO00OOOOOO ,OOOOO00000000O000 ,O0OO00OOOOOO00OO0 )#line:202
    def setSysMarkVals (OOOOOO000OOOOOO0O ,O0OOOOO0O000O0O0O ,O0O000OO000OO00O0 ,O00000OO000OOO0OO ,O000O0OOO0O0000OO ,OO0OO0O0000O00OOO ):#line:204
        if len (O0O000OO000OO00O0 )>0 :#line:205
            OOOOOO000OOOOOO0O .value .append ([O0OOOOO0O000O0O0O ,0 ,O0O000OO000OO00O0 [-1 ]])#line:206
            OOOOOO000OOOOOO0O .value .append ([O0OOOOO0O000O0O0O ,1 ,O00000OO000OOO0OO [-1 ]])#line:207
            OOOOOO000OOOOOO0O .value .append ([O0OOOOO0O000O0O0O ,2 ,O000O0OOO0O0000OO [-1 ]])#line:208
            OOOOOO000OOOOOO0O .value .append ([O0OOOOO0O000O0O0O ,3 ,OO0OO0O0000O00OOO [-1 ]])#line:209
        OOOOOO000OOOOOO0O .value .sort ()#line:210
    def getSysMarkConds (OO000O000OO0O0OOO ,OOO0OOO0O0000O0O0 ,O0OOOO0OOOO0O0O0O ,O0O0O0000OO0O0OO0 ):#line:212
        O00000OO00OO0000O =list ()#line:213
        O0O0OO00O0000O0O0 =list ()#line:214
        OO0O0000O000O00O0 =list ()#line:215
        O00O0O00O0OO0000O =list ()#line:216
        O00O0000O0OOO00O0 =len (OO000O000OO0O0OOO .cond1 )#line:218
        for O0OO0OO0O00OO0OOO in range (valueLen -OO000O000OO0O0OOO .initHistory *OO000O000OO0O0OOO .numSysMark *OO000O000OO0O0OOO .numVars ,O00O0000O0OOO00O0 ):#line:219
            if OO000O000OO0O0OOO .cond1 [O0OO0OO0O00OO0OOO ][0 ]==OOO0OOO0O0000O0O0 :#line:220
                O00000OO00OO0000O .append (OO000O000OO0O0OOO .value1 [O0OO0OO0O00OO0OOO ][1 ])#line:221
                O0O0OO00O0000O0O0 .append (OO000O000OO0O0OOO .value2 [O0OO0OO0O00OO0OOO ][1 ])#line:222
                OO0O0000O000O00O0 .append (OO000O000OO0O0OOO .value3 [O0OO0OO0O00OO0OOO ][1 ])#line:223
                O00O0O00O0OO0000O .append (OO000O000OO0O0OOO .value4 [O0OO0OO0O00OO0OOO ][1 ])#line:224
        return (O00000OO00OO0000O ,O0O0OO00O0000O0O0 ,OO0O0000O000O00O0 ,O00O0O00O0OO0000O )#line:225
        return (O00000OO00OO0000O ,O0O0OO00O0000O0O0 ,OO0O0000O000O00O0 ,O00O0O00O0OO0000O )#line:226
    def setSysMarkConds (O000OO0O00O0000OO ,OO00O0O0000000O00 ,OO000000OOOO0OO0O ,OO0O000OO00O0O000 ,O0000OO000OOOO000 ,O0OO0000O00O000OO ):#line:228
        if len (OO000000OOOO0OO0O )>0 :#line:229
            O000OO0O00O0000OO .cond1 .append ([OO00O0O0000000O00 ,OO000000OOOO0OO0O [-1 ]])#line:230
            O000OO0O00O0000OO .cond2 .append ([OO00O0O0000000O00 ,OO0O000OO00O0O000 [-1 ]])#line:231
            O000OO0O00O0000OO .cond3 .append ([OO00O0O0000000O00 ,O0000OO000OOOO000 [-1 ]])#line:232
            O000OO0O00O0000OO .cond4 .append ([OO00O0O0000000O00 ,O0OO0000O00O000OO [-1 ]])#line:233
